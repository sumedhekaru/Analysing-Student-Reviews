/*! 370-367-RELEASE 2019-08-15 */

!function(){window.TBC=window.TBC||{};var e=window.TBC.cmd=window.TBC.cmd||[],t={connection:!!window.postMessage},n,i,o={validateApiActionArguments:function(e,t){if("object"!=typeof t[0].sizeObject&&"object"!=typeof t[0].iframeArgs&&"function"!=typeof t[1])throw new TypeError("invalid argument supplied for "+e+"()")},init:function(){n={},i={},window.addEventListener("message",o.receiveMessage),o.switchCmd(),o.executeCmd(),o.isMobileSDK()&&o.registerTrcClicks()},registerTrcClicks:function(){document.body?document.body.addEventListener("click",function(e){var t=o.extractItemData(e.target);t&&(e.preventDefault(),TBC.click(t))},!0):requestAnimationFrame(o.registerTrcClicks)},extractItemData:function(e){return"BODY"===e.nodeName?null:"A"===e.nodeName?o.collectElementData(e):e.parentElement?o.extractItemData(e.parentElement):null},collectElementData:function(e){var t={url:e.href};if(t.isCardClick=!!e.parentElement.video_data,t.isCardClick){t.video_data=e.parentElement.video_data;var n=o.getPlacementParentElement(e);t.placement_name=n.dataset.placementName,t.is_organic=!n.querySelector("."+TRC.SPONSORED_CONTAINER_CLASS_NAME)}return t},getPlacementParentElement:function(e){for(var t=document.querySelectorAll("[data-placement-name]")||[],n=0;n<t.length;n++)if(t[n].contains(e))return t[n];return null},switchCmd:function(){e.push=function(e){"function"==typeof e&&e()}},executeCmd:function(){for(var t;t=e.shift();)"function"==typeof t&&t()},receiveMessage:function(e){var t=e.data,i;t&&t.action&&(i=n[t.action])&&(delete n[t.action],i(t.dimension,t.message))},sendMessage:function(e,t){var n={id:o.getParamValueFromHash("tbcId"),action:e,payload:t};window.top.postMessage(n,"*")},doAction:function(e,i){o.validateApiActionArguments(e,i),t.connection?n[e]||(n[e]=i[1],o.sendMessage(e,i[0])):i[1](null,"Taboola Connect is not supported")},getParamValueFromHash:function(e){var t=location.hash.match(new RegExp("(#|&)"+e+"=([^&]*)"));return t?t[2]:""},isMobileSDK:function(){return"true"===o.getParamValueFromHash("isMobileSDK")}};TBC.rendered=function(e,t){i["rendered"]||(i["rendered"]=1,o.doAction("rendered",[{sizeObject:e},t]))},TBC.expand=function(e,t){o.doAction("expand",[{sizeObject:e},t])},TBC.collapse=function(e,t){o.doAction("collapse",[{sizeObject:e},t])},TBC.getMaxHeight=function(e){o.doAction("maxHeight",[{},e])},TBC.click=function(e,t){"function"==typeof e?o.doAction("click",[{},e]):o.doAction("click",[{sizeObject:e},t])},TBC.openInIframe=function(e,t){o.doAction("openInIframe",[{iframeArgs:e},t])},TBC.supports=function(){return t},o.init(),window._trcIsUTactive&&(TBC.privateMethods=o)}();